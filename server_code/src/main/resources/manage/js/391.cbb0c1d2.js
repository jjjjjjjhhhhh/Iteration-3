"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[391],{67391:(e,n,u)=>{u.r(n),u.d(n,{default:()=>g});var t=u(82010),l=(u(79853),u(6603),u(33217),u(49127),u(59857),u(53618),u(36046),u(42134),u(83556)),a=u(11702),i=u(98529),o=u(49583),r=u(20089),c=u(9479),d={key:0,class:"center_view"},f={style:{"text-align":"left",width:"100%","margin-bottom":"20px"}},m={key:0},p={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},s={style:{"font-weight":"700","font-size":"16px"}},v={style:{"padding-right":"30px"}},w={style:{display:"flex","justify-content":"center","align-items":"center","margin-bottom":"20px"}},k=(0,l._)("div",null,"父级菜单：",-1),b={style:{width:"100%","text-align":"center"}};const h={__name:"list",setup:function(e){var n,u=null===(n=(0,l.FN)())||void 0===n?void 0:n.appContext.config.globalProperties,h=function(e,n){return null===u||void 0===u?void 0:u.$toolUtil.isAuth(e,n)},y=(0,o.iH)([]),g=(0,o.iH)(0),_=(0,o.iH)(0),V=(0,o.iH)([]),x=function(){u.$http.get("menu/lists").then((function(e){y.value=JSON.parse(e.data.data[0].menujson),V.value=y.value[g.value].backMenu.map((function(e){return e.menu}))}))};x();var C=function(){V.value=y.value[g.value].backMenu.map((function(e){return e.menu}))},W=function(){u.$http.post("menu/update",{id:1,menujson:JSON.stringify(y.value)}).then((function(e){0==e.data.code&&r.z8.success("保存成功，重新登录后生效")}))},U=(0,o.iH)(!1),H=(0,o.iH)(null),M=(0,o.iH)(0),j=function(e,n){_.value=e,H.value=e,M.value=n,U.value=!0},z=function(){var e,n=y.value[g.value].backMenu[_.value].child.splice(M.value,1);(e=y.value[g.value].backMenu[H.value].child).push.apply(e,(0,t.Z)(n)),U.value=!1},D=function(e,n){c.T.prompt("请输入新菜单名","修改菜单名",{inputValidator:function(e){return e&&e.trim()?n.find((function(n){return n.menu==e.trim()}))?"该菜单名已存在":void 0:"请输入菜单名"}}).then((function(n){var u=n.value;e.menu=u.trim()}))["catch"]((function(){}))},N=function(e,n){var u;0!=n&&((u=e).splice.apply(u,[n-1,0].concat((0,t.Z)(e.splice(n,1)))),e=JSON.parse(JSON.stringify(e)))};return function(e,n){var u=(0,l.up)("el-button"),t=(0,l.up)("el-table-column"),o=(0,l.up)("el-checkbox"),r=(0,l.up)("el-checkbox-group"),c=(0,l.up)("el-table"),_=(0,l.up)("el-collapse-item"),x=(0,l.up)("el-collapse"),M=(0,l.up)("el-tab-pane"),$=(0,l.up)("el-tabs"),J=(0,l.up)("el-option"),K=(0,l.up)("el-select"),O=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[h("menu","菜单管理")||h("menu","修改")?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",f,[(0,l.Wm)(u,{type:"primary",style:{width:"100px"},onClick:W},{default:(0,l.w5)((function(){return[(0,l.Uk)("保存修改")]})),_:1})]),(0,l.Wm)($,{type:"border-card",modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return g.value=e}),onTabChange:C},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,(function(e,d){return(0,l.wg)(),(0,l.j4)(M,{key:e.roleName,label:e.roleName,name:d},{default:(0,l.w5)((function(){return[d==g.value?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(x,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return V.value=e})},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.backMenu,(function(n,d){return(0,l.wg)(),(0,l.j4)(_,{name:n.menu},{title:(0,l.w5)((function(){return[(0,l._)("div",p,[(0,l._)("div",s,(0,a.zw)(n.menu),1),(0,l._)("div",v,[(0,l.Wm)(u,{size:"small",onClick:(0,i.iM)((function(n){return N(e.backMenu,d)}),["stop"])},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 上移 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",type:"primary",onClick:(0,i.iM)((function(u){return D(n,e.backMenu)}),["stop"])},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改菜单名 ")]})),_:2},1032,["onClick"])])])]})),default:(0,l.w5)((function(){return[(0,l.Wm)(c,{data:n.child,"show-header":!1,style:{width:"100%",background:"#edeef0",border:"1px solid #ddd"}},{default:(0,l.w5)((function(){return[(0,l.Wm)(t,{prop:"menu",label:"菜单名",width:"180"}),(0,l.Wm)(t,{label:"权限"},{default:(0,l.w5)((function(e){return[(0,l.Wm)(r,{modelValue:e.row.buttons,"onUpdate:modelValue":function(n){return e.row.buttons=n}},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.row.allButtons,(function(e){return(0,l.wg)(),(0,l.j4)(o,{label:e,value:e},null,8,["label","value"])})),256))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(t,{label:"操作"},{default:(0,l.w5)((function(e){return[(0,l.Wm)(u,{size:"small",onClick:function(u){return N(n.child,e.$index)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 上移 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",type:"primary",onClick:function(u){return D(e.row,n.child)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改菜单名 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(u,{size:"small",type:"warning",onClick:function(n){return j(d,e.$index)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改父级菜单 ")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1032,["data"])]})),_:2},1032,["name"])})),256))]})),_:2},1032,["modelValue"])])):(0,l.kq)("",!0)]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue"])])):(0,l.kq)("",!0),(0,l.Wm)(O,{title:"修改父级菜单",modelValue:U.value,"onUpdate:modelValue":n[3]||(n[3]=function(e){return U.value=e}),width:"30%"},{default:(0,l.w5)((function(){return[(0,l._)("div",w,[k,(0,l.Wm)(K,{modelValue:H.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return H.value=e}),placeholder:"请选择父级菜单",style:{width:"200px"}},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value[g.value].backMenu,(function(e,n){return(0,l.wg)(),(0,l.j4)(J,{key:e.menu,label:e.menu,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),(0,l._)("div",b,[(0,l.Wm)(u,{type:"primary",onClick:z},{default:(0,l.w5)((function(){return[(0,l.Uk)("确 定")]})),_:1})])]})),_:1},8,["modelValue"])])}}},y=h,g=y}}]);
//# sourceMappingURL=391.cbb0c1d2.js.map