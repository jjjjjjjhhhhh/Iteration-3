{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.render = render;\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.string.ends-with.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nvar _vue = require(\"vue\");\nvar _withScopeId = function _withScopeId(n) {\n  return (0, _vue.pushScopeId)(\"data-v-5f438dd0\"), n = n(), (0, _vue.popScopeId)(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"top_view\"\n};\nvar _hoisted_2 = {\n  \"class\": \"top_left_view\"\n};\nvar _hoisted_3 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/(0, _vue.createElementVNode)(\"div\", {\n    \"class\": \"projectTitle\"\n  }, \"Family Health and Life Management System for Obese Population\", -1 /* HOISTED */);\n});\nvar _hoisted_4 = {\n  \"class\": \"top_right_view\"\n};\nvar _hoisted_5 = {\n  \"class\": \"avatar-wrapper\"\n};\nvar _hoisted_6 = {\n  \"class\": \"nickname\"\n};\nvar _hoisted_7 = [\"src\"];\nvar _hoisted_8 = {\n  \"class\": \"z-box\",\n  style: {\n    \"width\": \"70%\",\n    \"padding\": \"20px\",\n    \"margin\": \"0 auto\"\n  }\n};\nvar _hoisted_9 = [\"onClick\"];\nvar _hoisted_10 = [\"src\"];\nvar _hoisted_11 = {\n  style: {\n    \"margin\": \"0 0 0 10px\",\n    \"display\": \"flex\",\n    \"flex-direction\": \"column\",\n    \"align-items\": \"flex-start\"\n  }\n};\nvar _hoisted_12 = {\n  style: {\n    \"fontSize\": \"14px\",\n    \"color\": \"#000\",\n    \"flex\": \"1\",\n    \"fontWeight\": \"bold\"\n  },\n  \"class\": \"item-style\"\n};\nvar _hoisted_13 = {\n  key: 0,\n  style: {\n    \"padding\": \"0 5px\",\n    \"height\": \"16px\",\n    \"border-radius\": \"50%\",\n    \"text-align\": \"center\",\n    \"line-height\": \"16px\",\n    \"font-size\": \"12px\",\n    \"background\": \"#f00\",\n    \"color\": \"#fff\",\n    \"width\": \"auto\",\n    \"margin\": \"0 2px 0 0\"\n  }\n};\nvar _hoisted_14 = {\n  key: 0,\n  \"class\": \"noList\"\n};\nvar _hoisted_15 = {\n  \"class\": \"chat-content\",\n  id: \"chat-content\"\n};\nvar _hoisted_16 = {\n  key: 0,\n  style: {\n    \"font-size\": \"12px\",\n    \"text-align\": \"center\",\n    \"margin\": \"4px 0\"\n  }\n};\nvar _hoisted_17 = {\n  key: 1,\n  \"class\": \"right-content\"\n};\nvar _hoisted_18 = {\n  key: 1,\n  controls: \"\",\n  style: {\n    \"width\": \"200px\",\n    \"height\": \"160px\"\n  }\n};\nvar _hoisted_19 = [\"src\"];\nvar _hoisted_20 = [\"src\"];\nvar _hoisted_21 = {\n  key: 2,\n  \"class\": \"left-content\"\n};\nvar _hoisted_22 = [\"src\"];\nvar _hoisted_23 = {\n  key: 1,\n  controls: \"\",\n  style: {\n    \"width\": \"200px\",\n    \"height\": \"160px\"\n  }\n};\nvar _hoisted_24 = [\"src\"];\nvar _hoisted_25 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/(0, _vue.createElementVNode)(\"div\", {\n    \"class\": \"clear-float\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_26 = {\n  slot: \"footer\",\n  \"class\": \"dialog-footer\",\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nvar _hoisted_27 = [\"innerHTML\"];\nvar _hoisted_28 = {\n  \"class\": \"breadcrumb-view\"\n};\nvar _hoisted_29 = {\n  key: 0,\n  \"class\": \"iconfont icon-zhuye2\"\n};\nvar _hoisted_30 = [\"onClick\"];\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_Fold = (0, _vue.resolveComponent)(\"Fold\");\n  var _component_Expand = (0, _vue.resolveComponent)(\"Expand\");\n  var _component_el_icon = (0, _vue.resolveComponent)(\"el-icon\");\n  var _component_arrow_down = (0, _vue.resolveComponent)(\"arrow-down\");\n  var _component_el_dropdown_item = (0, _vue.resolveComponent)(\"el-dropdown-item\");\n  var _component_el_dropdown_menu = (0, _vue.resolveComponent)(\"el-dropdown-menu\");\n  var _component_el_dropdown = (0, _vue.resolveComponent)(\"el-dropdown\");\n  var _component_el_dialog = (0, _vue.resolveComponent)(\"el-dialog\");\n  var _component_el_alert = (0, _vue.resolveComponent)(\"el-alert\");\n  var _component_el_image = (0, _vue.resolveComponent)(\"el-image\");\n  var _component_el_input = (0, _vue.resolveComponent)(\"el-input\");\n  var _component_el_button = (0, _vue.resolveComponent)(\"el-button\");\n  var _component_el_upload = (0, _vue.resolveComponent)(\"el-upload\");\n  var _component_el_breadcrumb_item = (0, _vue.resolveComponent)(\"el-breadcrumb-item\");\n  var _component_el_breadcrumb = (0, _vue.resolveComponent)(\"el-breadcrumb\");\n  return (0, _vue.openBlock)(), (0, _vue.createElementBlock)(_vue.Fragment, null, [(0, _vue.createElementVNode)(\"div\", _hoisted_1, [(0, _vue.createElementVNode)(\"div\", _hoisted_2, [(0, _vue.createElementVNode)(\"div\", {\n    \"class\": (0, _vue.normalizeClass)([\"fold_view\", {\n      'is_collapse': $setup.collapse\n    }]),\n    onClick: $setup.toggleClick\n  }, [(0, _vue.createVNode)(_component_el_icon, {\n    \"class\": \"icons\"\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [!$setup.collapse ? ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_Fold, {\n        key: 0\n      })) : ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_Expand, {\n        key: 1\n      }))];\n    }),\n    _: 1 /* STABLE */\n  })], 2 /* CLASS */)]), _hoisted_3, (0, _vue.createElementVNode)(\"div\", _hoisted_4, [(0, _vue.createVNode)(_component_el_dropdown, {\n    \"class\": \"avatar-container\",\n    trigger: \"hover\"\n  }, {\n    dropdown: (0, _vue.withCtx)(function () {\n      return [(0, _vue.createVNode)(_component_el_dropdown_menu, {\n        \"class\": \"user-dropDown\",\n        slot: \"dropdown\"\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [(0, _vue.createVNode)(_component_el_dropdown_item, {\n            \"class\": \"center\",\n            onClick: $setup.centerClick\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createTextVNode)(\" Personal Center \")];\n            }),\n            _: 1 /* STABLE */\n          }), $setup.changeHasChat() ? ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_dropdown_item, {\n            key: 0,\n            \"class\": \"chatRecord\"\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createElementVNode)(\"span\", {\n                style: {\n                  \"display\": \"block\"\n                },\n                onClick: $setup.chatRecordClick\n              }, \"Chat history\")];\n            }),\n            _: 1 /* STABLE */\n          })) : (0, _vue.createCommentVNode)(\"v-if\", true), (0, _vue.createVNode)(_component_el_dropdown_item, {\n            \"class\": \"password\",\n            onClick: $setup.updatepasswordClick\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createTextVNode)(\" Change Password \")];\n            }),\n            _: 1 /* STABLE */\n          }), (0, _vue.createVNode)(_component_el_dropdown_item, {\n            \"class\": \"front\"\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createElementVNode)(\"span\", {\n                style: {\n                  \"display\": \"block\"\n                },\n                onClick: $setup.frontClick\n              }, \"System front-end\")];\n            }),\n            _: 1 /* STABLE */\n          }), $setup.roleName == '管理员' ? ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_dropdown_item, {\n            key: 1,\n            \"class\": \"backUp\"\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createElementVNode)(\"span\", {\n                style: {\n                  \"display\": \"block\"\n                },\n                onClick: $setup.backUp\n              }, \"Data backup\")];\n            }),\n            _: 1 /* STABLE */\n          })) : (0, _vue.createCommentVNode)(\"v-if\", true), (0, _vue.createVNode)(_component_el_dropdown_item, {\n            \"class\": \"loginOut\"\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createElementVNode)(\"span\", {\n                style: {\n                  \"display\": \"block\"\n                },\n                onClick: $setup.onLogout\n              }, \"Log Out\")];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n\n        _: 1 /* STABLE */\n      })];\n    }),\n\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createElementVNode)(\"div\", _hoisted_5, [(0, _vue.createElementVNode)(\"div\", _hoisted_6, \"Welcome \" + (0, _vue.toDisplayString)(_ctx.$toolUtil.storageGet('adminName')), 1 /* TEXT */), (0, _vue.createElementVNode)(\"img\", {\n        \"class\": \"user-avatar\",\n        src: $setup.store.getters['user/avatar']\n      }, null, 8 /* PROPS */, _hoisted_7), (0, _vue.createVNode)(_component_el_icon, {\n        \"class\": \"el-icon-arrow-down\"\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [(0, _vue.createVNode)(_component_arrow_down)];\n        }),\n        _: 1 /* STABLE */\n      })])];\n    }),\n\n    _: 1 /* STABLE */\n  })]), (0, _vue.createVNode)(_component_el_dialog, {\n    modelValue: $setup.recordVisible,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.recordVisible = $event;\n    }),\n    title: 'Chat history',\n    \"append-to-body\": true\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createElementVNode)(\"div\", _hoisted_8, [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)($setup.recordList, function (item) {\n        return (0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", {\n          \"class\": \"section-content\",\n          key: item.id,\n          onClick: function onClick($event) {\n            return $setup.chatClick(item);\n          }\n        }, [(0, _vue.createElementVNode)(\"img\", {\n          src: item.picture ? _ctx.$config.url + item.picture : require('@/assets/img/avatar.png'),\n          style: {\n            \"width\": \"60px\",\n            \"border-radius\": \"50%\"\n          },\n          alt: \"\"\n        }, null, 8 /* PROPS */, _hoisted_10), (0, _vue.createElementVNode)(\"div\", _hoisted_11, [(0, _vue.createElementVNode)(\"div\", _hoisted_12, (0, _vue.toDisplayString)(item.name), 1 /* TEXT */), (0, _vue.createElementVNode)(\"div\", {\n          style: (0, _vue.normalizeStyle)({\n            \"color\": \"#666\",\n            \"flex\": \"1\",\n            \"fontSize\": \"14px\",\n            \"lineHeight\": \"1.5\",\n            \"display\": \"flex\",\n            \"alignItems\": \"center\"\n          }),\n          \"class\": \"item-style\"\n        }, [item.notreadnum ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_13, (0, _vue.toDisplayString)(item.notreadnum), 1 /* TEXT */)) : (0, _vue.createCommentVNode)(\"v-if\", true), (0, _vue.createTextVNode)(\" \" + (0, _vue.toDisplayString)(item.content.split('/').length && item.content.split('/')[0] == 'upload' ? '[图片]' : item.content), 1 /* TEXT */)], 4 /* STYLE */)])], 8 /* PROPS */, _hoisted_9);\n      }), 128 /* KEYED_FRAGMENT */)), !$setup.recordList.length ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_14, \" No chat history at the moment \")) : (0, _vue.createCommentVNode)(\"v-if\", true)])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), (0, _vue.createVNode)(_component_el_dialog, {\n    modelValue: $setup.chatVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $setup.chatVisible = $event;\n    }),\n    onClose: $setup.clearChat,\n    title: $setup.nowname,\n    \"append-to-body\": true\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createElementVNode)(\"div\", _hoisted_15, [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)($setup.chatList, function (item, index) {\n        return (0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", {\n          key: item.id\n        }, [index > 1 && $setup.moment($setup.chatList[index - 1].addtime).date() != $setup.moment(item.addtime).date() || index == 0 ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_16, (0, _vue.toDisplayString)($setup.moment(item.addtime).format(\"MM-DD HH:mm\")), 1 /* TEXT */)) : (0, _vue.createCommentVNode)(\"v-if\", true), item.uid == $setup.user.id ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_17, [item.format == 1 ? ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_alert, {\n          key: 0,\n          \"class\": \"text-content\",\n          title: item.content,\n          closable: false,\n          type: \"warning\"\n        }, null, 8 /* PROPS */, [\"title\"])) : item.content.endsWith('.mp4') ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"video\", _hoisted_18, [(0, _vue.createElementVNode)(\"source\", {\n          src: _ctx.$config.url + item.content\n        }, null, 8 /* PROPS */, _hoisted_19)])) : ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_image, {\n          key: 2,\n          fit: \"cover\",\n          src: item.content ? _ctx.$config.url + item.content : '',\n          style: {\n            \"width\": \"100px\",\n            \"height\": \"100px\"\n          },\n          \"preview-src-list\": [item.content ? _ctx.$config.url + item.content : '']\n        }, null, 8 /* PROPS */, [\"src\", \"preview-src-list\"])), (0, _vue.createElementVNode)(\"img\", {\n          src: $setup.avatar ? _ctx.$config.url + $setup.avatar : require('@/assets/img/avatar.png'),\n          alt: \"\",\n          style: {\n            \"width\": \"30px\",\n            \"border-radius\": \"50%\",\n            \"height\": \"30px\",\n            \"margin\": \"0 0 0 10px\",\n            \"flex-shrink\": \"0\",\n            \"object-fit\": \"cover\"\n          }\n        }, null, 8 /* PROPS */, _hoisted_20)])) : ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"div\", _hoisted_21, [(0, _vue.createElementVNode)(\"img\", {\n          src: $setup.nowfpic ? _ctx.$config.url + $setup.nowfpic : require('@/assets/img/avatar.png'),\n          alt: \"\",\n          style: {\n            \"width\": \"30px\",\n            \"border-radius\": \"50%\",\n            \"height\": \"30px\",\n            \"margin\": \"0 10px 0 0\",\n            \"flex-shrink\": \"0\",\n            \"object-fit\": \"cover\"\n          }\n        }, null, 8 /* PROPS */, _hoisted_22), item.format == 1 ? ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_alert, {\n          key: 0,\n          \"class\": \"text-content\",\n          title: item.content,\n          closable: false,\n          type: \"success\"\n        }, null, 8 /* PROPS */, [\"title\"])) : item.content.endsWith('.mp4') ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"video\", _hoisted_23, [(0, _vue.createElementVNode)(\"source\", {\n          src: _ctx.$config.url + item.content\n        }, null, 8 /* PROPS */, _hoisted_24)])) : ((0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_image, {\n          key: 2,\n          fit: \"cover\",\n          src: item.content ? _ctx.$config.url + item.content : '',\n          style: {\n            \"width\": \"100px\",\n            \"height\": \"100px\"\n          },\n          \"preview-src-list\": [item.content ? _ctx.$config.url + item.content : '']\n        }, null, 8 /* PROPS */, [\"src\", \"preview-src-list\"]))])), _hoisted_25]);\n      }), 128 /* KEYED_FRAGMENT */))]), (0, _vue.createElementVNode)(\"div\", _hoisted_26, [(0, _vue.createVNode)(_component_el_input, {\n        onKeydown: (0, _vue.withKeys)($setup.addChat, [\"enter\", \"native\"]),\n        modelValue: $setup.chatForm.content,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n          return $setup.chatForm.content = $event;\n        }),\n        placeholder: \"Enter content\",\n        style: {\n          \"width\": \"calc(100% - 180px)\",\n          \"float\": \"left\",\n          \"border\": \"1px solid #ccc\",\n          \"border-radius\": \"4px\",\n          \"padding\": \"0 10px\",\n          \"margin-right\": \"4px\"\n        }\n      }, null, 8 /* PROPS */, [\"onKeydown\", \"modelValue\"]), (0, _vue.createVNode)(_component_el_button, {\n        disabled: $setup.chatForm.content ? false : true,\n        type: \"primary\",\n        onClick: $setup.addChat\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [(0, _vue.createTextVNode)(\"Send\")];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"disabled\"]), (0, _vue.createVNode)(_component_el_upload, {\n        style: {\n          \"display\": \"inline-block\",\n          \"margin\": \"0 0 0 6px\"\n        },\n        \"class\": \"upload-demo\",\n        action: $setup.uploadUrl,\n        \"on-success\": $setup.uploadSuccess,\n        \"show-file-list\": false,\n        accept: \"image/*,.mp4\"\n      }, {\n        \"default\": (0, _vue.withCtx)(function () {\n          return [(0, _vue.createVNode)(_component_el_button, {\n            type: \"success\"\n          }, {\n            \"default\": (0, _vue.withCtx)(function () {\n              return [(0, _vue.createTextVNode)(\"Upload files\")];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n\n        _: 1 /* STABLE */\n      })])];\n    }),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"]), (0, _vue.createVNode)(_component_el_dialog, {\n    title: $setup.remindForm.title,\n    \"append-to-body\": true,\n    modelValue: $setup.remindVisibie,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $setup.remindVisibie = $event;\n    }),\n    width: \"60%\"\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [(0, _vue.createElementVNode)(\"div\", {\n        innerHTML: $setup.remindForm.content\n      }, null, 8 /* PROPS */, _hoisted_27)];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"title\", \"modelValue\"])]), (0, _vue.createElementVNode)(\"div\", _hoisted_28, [(0, _vue.createVNode)(_component_el_breadcrumb, {\n    separator: \"───\"\n  }, {\n    \"default\": (0, _vue.withCtx)(function () {\n      return [((0, _vue.openBlock)(true), (0, _vue.createElementBlock)(_vue.Fragment, null, (0, _vue.renderList)($setup.breadcrumbList, function (item, index) {\n        return (0, _vue.openBlock)(), (0, _vue.createBlock)(_component_el_breadcrumb_item, {\n          key: item.path\n        }, {\n          \"default\": (0, _vue.withCtx)(function () {\n            return [!index ? ((0, _vue.openBlock)(), (0, _vue.createElementBlock)(\"i\", _hoisted_29)) : (0, _vue.createCommentVNode)(\"v-if\", true), (0, _vue.createElementVNode)(\"span\", {\n              onClick: function onClick($event) {\n                return $setup.router.push(item.path);\n              }\n            }, (0, _vue.toDisplayString)(item.name), 9 /* TEXT, PROPS */, _hoisted_30)];\n          }),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */);\n      }), 128 /* KEYED_FRAGMENT */))];\n    }),\n\n    _: 1 /* STABLE */\n  })])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":"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","names":["style","id","controls","slot","_hoisted_1","_hoisted_2","$setup","onClick","_component_el_icon","_component_Fold","key","_component_Expand","_hoisted_3","_hoisted_4","_component_el_dropdown","trigger","dropdown","_component_el_dropdown_menu","_component_el_dropdown_item","_hoisted_5","_hoisted_6","_ctx","storageGet","src","getters","_component_arrow_down","_component_el_dialog","title","_hoisted_8","_Fragment","item","picture","url","require","alt","_hoisted_11","_hoisted_12","name","notreadnum","_hoisted_13","content","split","length","_hoisted_14","onClose","_hoisted_15","index","addtime","date","_hoisted_16","format","uid","_hoisted_17","_component_el_alert","closable","type","endsWith","_hoisted_18","_component_el_image","fit","_hoisted_21","_hoisted_23","_hoisted_25","_hoisted_26","_component_el_input","onKeydown","placeholder","_component_el_button","disabled","_component_el_upload","action","accept","width","innerHTML","_hoisted_28","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","path","_hoisted_29","push"],"sourceRoot":"","sources":["C:\\Users\\24831\\Desktop\\Y\\毕业设计\\projectB\\迭代2\\manage_code\\src\\components\\index\\indexTop.vue"],"sourcesContent":["<template>\r\n\t<div class=\"top_view\">\r\n\t\t<div class=\"top_left_view\">\r\n\t\t\t<div class=\"fold_view\" @click=\"toggleClick\" :class=\"{'is_collapse':collapse}\">\r\n\t\t\t\t<el-icon class=\"icons\">\r\n\t\t\t\t\t<Fold v-if=\"!collapse\" />\r\n\t\t\t\t\t<Expand v-else />\r\n\t\t\t\t</el-icon>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"projectTitle\">Family Health and Life Management System for Obese Population</div>\r\n\t\t<div class=\"top_right_view\">\r\n\t\t\t<el-dropdown class=\"avatar-container\" trigger=\"hover\">\r\n\t\t\t\t<div class=\"avatar-wrapper\">\r\n\t\t\t\t\t<div class=\"nickname\">Welcome {{$toolUtil.storageGet('adminName')}}</div>\r\n\t\t\t\t\t<img class=\"user-avatar\" :src=\"store.getters['user/avatar']\">\r\n\t\t\t\t\t<el-icon class=\"el-icon-arrow-down\">\r\n\t\t\t\t\t\t<arrow-down />\r\n\t\t\t\t\t</el-icon>\r\n\t\t\t\t</div>\r\n\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t<el-dropdown-menu class=\"user-dropDown\" slot=\"dropdown\">\r\n\t\t\t\t\t\t<el-dropdown-item class=\"center\" @click=\"centerClick\" >\r\n\t\t\t\t\t\t\tPersonal Center\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"chatRecord\" v-if=\"changeHasChat()\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"chatRecordClick\">Chat history</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"password\" @click=\"updatepasswordClick\">\r\n\t\t\t\t\t\t\tChange Password\r\n\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"front\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"frontClick\">System front-end</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"backUp\" v-if=\"roleName=='管理员'\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"backUp\">Data backup</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"loginOut\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"onLogout\">Log Out</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</el-dropdown>\r\n\t\t</div>\r\n\t\t<el-dialog v-model=\"recordVisible\" :title=\"'Chat history'\" :append-to-body=\"true\">\r\n\t\t\t<div class=\"z-box\" :style='{\"width\":\"70%\",\"padding\":\"20px\",\"margin\":\"0 auto\"}'>\r\n\t\t\t\t<div class=\"section-content\" v-for=\"item in recordList\" :key=\"item.id\" @click=\"chatClick(item)\">\r\n\t\t\t\t\t<img :src=\"item.picture?$config.url + item.picture:require('@/assets/img/avatar.png')\" style=\"width: 60px;border-radius: 50%;\"\r\n\t\t\t\t\t\t alt=\"\">\r\n\t\t\t\t\t<div style=\"margin: 0 0 0 10px;display: flex;flex-direction: column;align-items: flex-start;\">\r\n\t\t\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"color\":\"#000\",\"flex\":\"1\",\"fontWeight\":\"bold\"}'\r\n\t\t\t\t\t\t\t class=\"item-style\">{{item.name}}</div>\r\n\t\t\t\t\t\t<div :style='{\"color\":\"#666\",\"flex\":\"1\",\"fontSize\":\"14px\",\"lineHeight\":\"1.5\",\"display\":\"flex\",\"alignItems\":\"center\"}'\r\n\t\t\t\t\t\t\t class=\"item-style\">\r\n\t\t\t\t\t\t\t<div v-if=\"item.notreadnum\" style=\"padding: 0 5px;height: 16px;border-radius: 50%;text-align: center;line-height: 16px;font-size: 12px;background: #f00;color:#fff;width: auto;margin: 0 2px 0 0\">{{item.notreadnum}}</div>\r\n\t\t\t\t\t\t\t{{item.content.split('/').length&&item.content.split('/')[0]=='upload'?'[图片]':item.content}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"noList\" v-if=\"!recordList.length\">\r\n\t\t\t\t\tNo chat history at the moment\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog v-model=\"chatVisible\" @close=\"clearChat\" :title=\"nowname\" :append-to-body=\"true\">\r\n\t\t\t<div class=\"chat-content\" id=\"chat-content\">\r\n\t\t\t\t<div v-bind:key=\"item.id\" v-for=\"(item,index) in chatList\">\r\n                    <div v-if=\"index>1&&moment(chatList[index-1].addtime).date()!=moment(item.addtime).date()||index==0\"\r\n                         style=\"font-size: 12px;text-align: center;margin: 4px 0;\">\r\n                        {{moment(item.addtime).format(\"MM-DD HH:mm\")}}\r\n                    </div>\r\n\t\t\t\t\t<div v-if=\"item.uid==user.id\" class=\"right-content\">\r\n\t\t\t\t\t\t<el-alert v-if=\"item.format==1\" class=\"text-content\" :title=\"item.content\" :closable=\"false\"\r\n\t\t\t\t\t\t\t\t  type=\"warning\"></el-alert>\r\n                        <video v-else-if=\"item.content.endsWith('.mp4')\" controls style=\"width: 200px;height: 160px\">\r\n                            <source  :src=\"$config.url + item.content\">\r\n                        </video>\r\n\t\t\t\t\t\t<el-image v-else fit=\"cover\" :src=\"item.content?$config.url + item.content:''\" style=\"width: 100px;height: 100px;\" :preview-src-list=\"[item.content?$config.url + item.content:'']\"></el-image>\r\n\t\t\t\t\t\t<img :src=\"avatar?$config.url + avatar:require('@/assets/img/avatar.png')\" alt=\"\" style=\"width: 30px;border-radius: 50%;height: 30px;margin: 0 0 0 10px;flex-shrink: 0;object-fit: cover;\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-else class=\"left-content\">\r\n\t\t\t\t\t\t<img :src=\"nowfpic?$config.url + nowfpic:require('@/assets/img/avatar.png')\" alt=\"\" style=\"width: 30px;border-radius: 50%;height: 30px;margin: 0 10px 0 0;flex-shrink: 0;object-fit: cover;\" />\r\n\t\t\t\t\t\t<el-alert v-if=\"item.format==1\" class=\"text-content\" :title=\"item.content\" :closable=\"false\"\r\n\t\t\t\t\t\t\t\t  type=\"success\"></el-alert>\r\n                        <video v-else-if=\"item.content.endsWith('.mp4')\" controls style=\"width: 200px;height: 160px\">\r\n                            <source  :src=\"$config.url + item.content\">\r\n                        </video>\r\n\t\t\t\t\t\t<el-image v-else fit=\"cover\" :src=\"item.content?$config.url + item.content:''\" style=\"width: 100px;height: 100px;\" :preview-src-list=\"[item.content?$config.url + item.content:'']\"></el-image>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"clear-float\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\" style=\"display: flex;align-items: center;\">\r\n\t\t\t\t<el-input @keydown.enter.native=\"addChat\" v-model=\"chatForm.content\" placeholder=\"Enter content\" style=\"width: calc(100% - 180px);float: left;border: 1px solid #ccc;border-radius: 4px;padding: 0 10px;margin-right: 4px;\">\r\n\t\t\t\t</el-input>\r\n\t\t\t\t<el-button :disabled=\"chatForm.content?false:true\" type=\"primary\" @click=\"addChat\">Send</el-button>\r\n\t\t\t\t<el-upload style=\"display: inline-block;margin: 0 0 0 6px;\" class=\"upload-demo\" :action=\"uploadUrl\" :on-success=\"uploadSuccess\"\r\n\t\t\t\t\t\t   :show-file-list=\"false\" accept=\"image/*,.mp4\">\r\n\t\t\t\t\t<el-button type=\"success\">Upload files</el-button>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n        <el-dialog :title=\"remindForm.title\" :append-to-body=\"true\" v-model=\"remindVisibie\" width=\"60%\">\r\n            <div v-html=\"remindForm.content\"></div>\r\n        </el-dialog>\r\n\t</div>\r\n    <div class=\"breadcrumb-view\">\r\n        <el-breadcrumb separator=\"───\">\r\n            <el-breadcrumb-item v-for=\"(item,index) in breadcrumbList\" :key=\"item.path\">\r\n                <i class=\"iconfont icon-zhuye2\" v-if=\"!index\"></i>\r\n                <span @click=\"router.push(item.path)\">{{item.name}}</span>\r\n            </el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\timport axios from 'axios'\r\n    import moment from \"moment\"\r\n\timport {\r\n\t\tElMessageBox\r\n\t} from 'element-plus'\r\n\timport {\r\n\t\ttoRefs,\r\n\t\tdefineEmits,\r\n\t\tgetCurrentInstance,\r\n\t\tref,\r\n\t\tonBeforeUnmount,\r\n\t\tcomputed,\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tuseRouter,\r\n\t\tuseRoute\r\n\t} from 'vue-router';\r\n\tconst router = useRouter()\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\tconst emit = defineEmits(['collapseChange'])\r\n\tconst role = context?.$toolUtil.storageGet('sessionTable')\r\n\tconst roleName = context?.$toolUtil.storageGet('role')\r\n\tconst route = useRoute()\r\n\tlet breadcrumbList = computed(()=>{\r\n\t\tlet arr = route.matched.map(item=>({\r\n\t\t\tname:item.meta.title||item.name,\r\n\t\t\tpath:item.path\r\n\t\t}))\r\n\t\treturn arr[arr.length-1].path=='/'?[arr[0]]:arr\r\n\t})\r\n\r\n\tconst props = defineProps({\r\n\t\tcollapse: Boolean\r\n\t})\r\n\tconst {collapse} = toRefs(props)\r\n\r\n\t//获取用户信息\r\n\timport { useStore } from 'vuex'\r\n\tconst store = useStore()\r\n\tconst user = computed(()=>store.getters['user/session'])\r\n\tconst avatar = ref(store.state.user.avatar)\r\n\tif(!store.state.user.session.id){\r\n\t\tstore.dispatch('user/getSession').then(()=>{\r\n            avatar.value = store.state.user.avatar\r\n        })\r\n\t}\r\n\tconst toggleClick = () => {\r\n\t\temit('collapseChange')\r\n\t}\r\n\t// 数据备份\r\n\tconst backUp = () =>{\r\n\t\tElMessageBox.confirm(`Do you want to back up the database?`, 'Tip', {\r\n\t\t\tconfirmButtonText: 'Yes',\r\n\t\t\tcancelButtonText: 'No',\r\n\t\t\ttype: 'warning',\r\n\t\t}).then(()=>{\r\n\t\t\taxios.get(process.env.VUE_APP_BASE_API + '/mysqldump', {\r\n\t\t\t    headers: {\r\n\t\t\t      token: context?.$toolUtil.storageGet(\"Token\")\r\n\t\t\t    },\r\n\t\t\t    responseType: \"blob\"\r\n\t\t\t  }).then(({data})=>{\r\n\t\t\t\tconst binaryData = [];\r\n\t\t\t\tbinaryData.push(data);\r\n\t\t\t\tconst objectUrl = window.URL.createObjectURL(new Blob(binaryData, {\r\n\t\t\t\t    type: 'application/pdf;chartset=UTF-8'\r\n\t\t\t\t}))\r\n\t\t\t\tconst a = document.createElement('a')\r\n\t\t\t\ta.href = objectUrl\r\n\t\t\t\ta.download = 'mysql.dmp'\r\n\t\t\t\t// a.click()\r\n\t\t\t\t// 下面这个写法兼容火狐\r\n\t\t\t\ta.dispatchEvent(new MouseEvent('click', {\r\n\t\t\t\t    bubbles: true,\r\n\t\t\t\t    cancelable: true,\r\n\t\t\t\t    view: window\r\n\t\t\t\t}))\r\n\t\t\t\twindow.URL.revokeObjectURL(data)\r\n\t\t\t\tmessage.message(\"Data backup successful\")\r\n\t\t\t})\r\n\t\t}).catch(_ => {})\r\n\t}\r\n\t// 退出登录\r\n\tconst onLogout = () => {\r\n\t\tlet toolUtil = context?.$toolUtil\r\n\t\tstore.dispatch('delAllCachedViews')\r\n\t\tstore.dispatch('delAllVisitedViews')\r\n        store.dispatch('user/loginOut')\r\n\t\ttoolUtil.storageClear()\r\n\t\trouter.replace({\r\n\t\t\tname: \"login\"\r\n\t\t});\r\n\t}\r\n\t// 跳转前台\r\n\tconst frontClick = () => {\r\n        window.open(`${context.$config.url}client/index.html#/index/home`,'_blank')\r\n\t}\r\n\t// 个人中心\r\n\tconst centerClick = () => {\r\n\t\trouter.push(`/${role}Center`)\r\n\t}\r\n\t// 修改密码\r\n\tconst updatepasswordClick = () => {\r\n\t\trouter.push(`/updatepassword`)\r\n\t}\r\n\tconst recordList = ref([])\r\n\tconst recordVisible = ref(false)\r\n\tconst chatVisible = ref(false)\r\n\tconst nowfid = ref(0)\r\n\tconst nowfpic = ref('')\r\n\tconst nowname = ref('')\r\n\tconst chatList = ref([])\r\n\tconst chatForm = ref({\r\n\t\tcontent: ''\r\n\t})\r\n\tconst chatTimer = ref(null)\r\n\tconst uploadUrl = context.$config.url + 'file/upload'\r\n\tconst hasChatList = [\r\n\t\t'yonghu',\r\n\t\t'jiankangzhuanjia',\r\n\t]\r\n\tconst chatRecordClick = () => {\r\n\t\tgetRecordList()\r\n\t}\r\n\tconst changeHasChat = () => {\r\n\t\tlet table = context.$toolUtil.storageGet('sessionTable')\r\n\t\tif(hasChatList.includes(table)){\r\n\t\t\treturn true\r\n\t\t}else{\r\n\t\t\tfalse\r\n\t\t}\r\n\t}\r\n\tconst getRecordList = () => {\r\n\t\tcontext.$http.get('chatfriend/page2', {\r\n\t\t\tparams: {\r\n\t\t\t\tuid: user.value.id,\r\n\t\t\t\ttype: 2\r\n\t\t\t}\r\n\t\t}).then(res => {\r\n\t\t\tif (res.data && res.data.code == 0) {\r\n\t\t\t\trecordList.value = res.data.data.list\r\n\t\t\t\trecordVisible.value = true\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst chatClick = (row) => {\r\n\t\tnowfid.value = row.fid\r\n\t\tnowfpic.value = row.picture\r\n\t\tnowname.value = row.name\r\n        scrollFlag.value = true\r\n\t\tgetChatList()\r\n\t\tchatVisible.value = true\r\n\t}\r\n    const scrollFlag = ref(true)\r\n\tconst getChatList = () => {\r\n\t\tcontext.$http.get('chatmessage/mlist', {\r\n\t\t\tparams: {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tlimit: 1000,\r\n\t\t\t\tuid: user.value.id,\r\n\t\t\t\tfid: nowfid.value\r\n\t\t\t}\r\n\t\t}).then(res => {\r\n\t\t\tif (res.data && res.data.code == 0) {\r\n\t\t\t\tchatList.value = res.data.data.list\r\n\t\t\t\tlet div = document.getElementsByClassName('chat-content')[0]\r\n\t\t\t\tsetTimeout(() => {\r\n                    if (div){\r\n                        if(div.scrollTop+div.clientHeight==div.scrollHeight || scrollFlag.value){\r\n                            div.scrollTop = div.scrollHeight\r\n                            scrollFlag.value = false\r\n                        }\r\n                    }\r\n\t\t\t\t}, 0)\r\n\t\t\t\tchatTimer.value = setTimeout(() => {\r\n\t\t\t\t\tgetChatList()\r\n\t\t\t\t}, 5000)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst clearChat = () => {\r\n\t\tclearTimeout(chatTimer.value)\r\n\t\tchatList.value = []\r\n\t\tgetRecordList()\r\n\t}\r\n\tconst uploadSuccess = (res) => {\r\n\t\tif (res.code == 0) {\r\n\t\t\tclearTimeout(chatTimer.value)\r\n\t\t\tcontext.$http.post('chatmessage/add', {\r\n\t\t\t\tuid: user.value.id,\r\n\t\t\t\tfid: nowfid.value,\r\n\t\t\t\tcontent: 'file/' + res.file,\r\n\t\t\t\tformat: 2\r\n\t\t\t}).then(res2 => {\r\n\t\t\t\tchatForm.value = {\r\n\t\t\t\t\tcontent: ''\r\n\t\t\t\t}\r\n                scrollFlag.value = true\r\n\t\t\t\tgetChatList()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst addChat = () => {\r\n        if(!chatForm.value.content.trim())return context.$message.error(\"The message content cannot be empty\")\r\n\t\tclearTimeout(chatTimer.value)\r\n\t\tcontext.$http.post('chatmessage/add', {\r\n\t\t\tuid: user.value.id,\r\n\t\t\tfid: nowfid.value,\r\n\t\t\tcontent: chatForm.value.content,\r\n\t\t\tformat: 1\r\n\t\t}).then(res2 => {\r\n\t\t\tchatForm.value = {\r\n\t\t\t\tcontent: ''\r\n\t\t\t}\r\n            scrollFlag.value = true\r\n\t\t\tgetChatList()\r\n\t\t})\r\n\t}\r\n    const remindVisibie = ref(false)\r\n    const remindForm = ref({})\r\n    const timesAll = ref(null)\r\n    const timesOnce = ref(null)\r\n    const getRecommendAll = async ()=>{\r\n        let res = await context.$http.get('popupremind/list',{\r\n            params: {\r\n                type: '全局'\r\n            }\r\n        })\r\n        let list = res.data.data.list\r\n        for (let x in list) {\r\n            if (new Date()>new Date(list[x].remindTime)) {\r\n                let obj = await context.$http.get('storeup/page',{\r\n                    params: {\r\n                        refid: list[x].id,\r\n                        tablename: 'popupremind',\r\n                        type: '61',\r\n                    }\r\n                })\r\n                if (!obj.data.data.list.length) {\r\n                    context.$notify({\r\n                        title: list[x].title,\r\n                        dangerouslyUseHTMLString: true,\r\n                        message: list[x].brief,\r\n                        duration: 0,\r\n                        position: 'bottom-right',\r\n                        onClick() {\r\n                            remindForm.value = list[x]\r\n                            remindVisibie.value = true\r\n                        }\r\n                    })\r\n                    context.$http.post('storeup/add',{\r\n                        userid: store.getters['user/session'].id,\r\n                        refid: list[x].id,\r\n                        tablename: 'popupremind',\r\n                        name: list[x].title,\r\n                        type: '61',\r\n                        picture:''\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        timesAll.value = setTimeout(() => {\r\n            getRecommendAll()\r\n        }, 10000)\r\n    }\r\n    const getRecommendOnce = async ()=>{\r\n        let res = await context.$http.get('popupremind/page',{\r\n            params: {\r\n                type: '私人'\r\n            }\r\n        })\r\n        let list = res.data.data.list\r\n        for (let x in list) {\r\n            if (new Date()>new Date(list[x].remindTime)) {\r\n                let obj = await context.$http.get('storeup/page',{\r\n                    params: {\r\n                        refid: list[x].id,\r\n                        tablename: 'popupremind',\r\n                        type: '61',\r\n                    }\r\n                })\r\n                if (!obj.data.data.list.length) {\r\n                    context.$notify({\r\n                        title: list[x].title,\r\n                        dangerouslyUseHTMLString: true,\r\n                        message: list[x].brief,\r\n                        duration: 0,\r\n                        position: 'top-right',\r\n                        onClick() {\r\n                            remindForm.value = list[x]\r\n                            remindVisibie.value = true\r\n                        }\r\n                    })\r\n                    context.$http.post('storeup/add',{\r\n                        userid: store.getters['user/session'].id,\r\n                        refid: list[x].id,\r\n                        tablename: 'popupremind',\r\n                        name: list[x].title,\r\n                        type: '61',\r\n                        picture:''\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        timesOnce.value = setTimeout(() => {\r\n            getRecommendOnce()\r\n        }, 10000)\r\n    }\r\n\r\n    if(context.$toolUtil.storageGet('sessionTable') != 'users'){\r\n        getRecommendAll()\r\n        getRecommendOnce()\r\n    }\r\n\r\n    onBeforeUnmount(()=>{\r\n        clearTimeout(timesAll.value)\r\n        clearTimeout(timesOnce.value)\r\n    })\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t// 总盒子\r\n\t.top_view {\r\n\t\t// 左边盒子\r\n\t\t.top_left_view {\r\n\t\t\tdisplay: none;\r\n\t\t\t// 折叠按钮盒子\r\n\t\t\t.fold_view {\r\n\t\t\t\t// 图标\r\n\t\t\t\t.icons {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 标题\r\n\t\t.projectTitle{\r\n\t\t}\r\n\t\t// 右部盒子\r\n\t\t.top_right_view{\r\n\t\t\t// 头像盒子\r\n\t\t\t.avatar-container {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tmargin: 0 30px 0 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 50px;\r\n\t\t\t\t.avatar-wrapper {\r\n\t\t\t\t\tmargin: 5px 0 0;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t// 昵称\r\n\t\t\t\t\t.nickname {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tmargin: 0 5px;\r\n\t\t\t\t\t\tline-height: 44px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 头像\r\n\t\t\t\t\t.user-avatar {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\t\twidth: 40px;\r\n\t\t\t\t\t\theight: 40px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 图标\r\n\t\t\t\t\t.el-icon-arrow-down {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 下拉盒子\r\n\t.el-dropdown-menu{\r\n\t\tbackground: #fff;\r\n\t\t// 下拉盒子itme\r\n\t\t:deep(.el-dropdown-menu__item){\r\n\t\t\tcolor: inherit;\r\n\t\t\tbackground: #fff;\r\n\t\t}\r\n\t\t// item悬浮\r\n\t\t:deep(.el-dropdown-menu__item:hover){\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground: var(--theme);\r\n\t\t}\r\n\t}\r\n\t.section-content {\r\n\t\tcursor: pointer;\r\n\t\tpadding: 20px;\r\n\t\tbox-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.3);\r\n\t\tmargin: 0 0 20px;\r\n\t\tcolor: #333;\r\n\t\tbackground: #fff;\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tborder-color: #efefef;\r\n\t\tborder-width: 0;\r\n\t\talign-items: center;\r\n\t\tborder-style: solid;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.section-content:hover {\r\n\t\tcolor: #fff;\r\n\t\tbackground: #DF847F10;\r\n\t}\r\n\t.chat-content {\r\n\t\tpadding-bottom: 20px;\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 10px;\r\n\t\tmax-height: 300px;\r\n\t\theight: 300px;\r\n\t\toverflow-y: scroll;\r\n\t\tborder: 1px solid #eeeeee;\r\n\t\tbackground: #fff;\r\n\r\n\t\t.left-content {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tpadding: 10px;\r\n\t\t\tmax-width: 80%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t.right-content {\r\n\t\t\tfloat: right;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tpadding: 10px;\r\n\t\t\tmax-width: 80%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.clear-float {\r\n\t\tclear: both;\r\n\t}\r\n\t.noList {\r\n\t\tcolor: #9e9e9e;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\tpadding: 60px 0;\r\n\t}\r\n</style>\r\n<style>\r\n/*总盒子*/\r\n.top_view{\r\n    height: 80px;\r\n    width: calc(100% - 0px);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: fixed;\r\n    left: 0px;\r\n    top: 0px;\r\n    z-index: 9;\r\n    padding: 0px;\r\n    border-width: 0 0 4px;\r\n    border-style: dashed;\r\n    border-color: #737373;\r\n    background: linear-gradient(45deg, rgba(255,255,255,1) 0%, rgba(65,59,96,1) 100%);\r\n    color: #fff;\r\n}\r\n/*标题*/\r\n.top_view .projectTitle{\r\n    font-size: 24px;\r\n    margin: 0px;\r\n    padding: 0px 0px 0px 20px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: #333;\r\n    order: 1;\r\n    margin-right: auto;\r\n}\r\n\r\n/*左边盒子*/\r\n.top_view .top_left_view{\r\n    width: auto;\r\n    display: none;\r\n    height: 100%;\r\n    align-items: center;\r\n}\r\n/*折叠按钮*/\r\n.top_view .top_left_view .fold_view{\r\n    display: flex;\r\n    padding: 0px;\r\n    margin: 0px 0px 0px 222px;\r\n    background: rgb(139, 92, 126);\r\n    border-radius: 50%;\r\n    width: 32px;\r\n    height: 32px;\r\n    align-items: center;\r\n    justify-content: center;\r\n }\r\n.top_view .top_left_view .fold_view:hover {\r\n    background:#fa9fa4;\r\n }\r\n/*图标*/\r\n.top_view .top_left_view .fold_view .icons{\r\n    font-size: 24px;\r\n    color: inherit;\r\n}\r\n\r\n/*系统公告*/\r\n.top_view .notice-btn{\r\n    padding: 0 16px;\r\n    margin-right:20px;\r\n    line-height: 50px;\r\n    font-size: 14px;\r\n    color: inherit;\r\n    order: 3;\r\n    height: 100%;\r\n    border: none;\r\n    background: none;\r\n    color: inherit;\r\n}\r\n.top_view .notice-btn:hover{\r\n    color: inherit;\r\n}\r\n.top_view .notice-btn .iconfont{\r\n    font-size: 16px;\r\n}\r\n\r\n/*右边盒子 横排*/\r\n.top_view .top_right_view{\r\n    width: auto;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    order: 4;\r\n    margin-right: 30px;\r\n    padding-left: 20px;\r\n }\r\n.top_view .top_right_view .actionBar{ }\r\n.top_view .top_right_view .actionBar .item { float:left; margin-right:20px; margin-bottom:5px; font-size:16px; color:#8b5c7e; font-weight:500;  }\r\n.top_view .top_right_view .actionBar .item:hover {   color: inherit; cursor:pointer;  }\r\n.top_view .top_right_view .actionBar .item i { font-size:18px; }\r\n\r\n.top_view .user-info{\r\n    position:absolute;\r\n    left:20px;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.top_view .user-info .img-wrapper{\r\n    margin-right:10px;\r\n}\r\n.top_view .user-info .img-wrapper .user-avatar{\r\n    width:50px;\r\n}\r\n.top_view .user-info .nickname{\r\n    font-size:16px;\r\n    color:#fff !important;\r\n}\r\n\r\n.top_view .weather {\r\n    order: 2;\r\n    display: flex;\r\n    white-space: nowrap;\r\n    line-height: 80px;\r\n    column-gap: 4px;\r\n    padding-left: 20px;\r\n    color: inherit;\r\n}\r\n\r\n.top_view img.user-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.top_view .avatar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.top_view .nickname {\r\n    white-space: nowrap;\r\n    margin-right: 6px;\r\n    color:#fff !important;\r\n}\r\n\r\n.top_view .nowDate {\r\n    order: 2;\r\n    white-space: nowrap;\r\n    margin: 0 20px;\r\n    padding-left: 20px;\r\n    line-height: 80px;\r\n    color: inherit;\r\n}\r\n\r\n.breadcrumb-view {\r\n    display:block;\r\n    background:none;\r\n    width: calc(100% - 70px) !important;\r\n    height: 32px;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 20px;\r\n    margin-left:20px;\r\n}\r\n/*分割线*/\r\n.breadcrumb-view .el-breadcrumb__separator{\r\n    color: #999;\r\n}\r\n.breadcrumb-view .el-breadcrumb__inner{\r\n    font-size:16px;\r\n    color: #333 !important;\r\n}\r\n.breadcrumb-view .el-breadcrumb__inner:hover{\r\n    color: #333;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"script","externalDependencies":[]}